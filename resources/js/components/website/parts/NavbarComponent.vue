<template>
    <div style="z-index: 9999" class="main-top-nav">
        <nav
            class="
                navbar navbar-expand-lg
                d-flex
                justify-content-between
                align-items-center
                w-100
            "
        >
            <router-link to="/" class="navbar-brand mr-4">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 805.67 156.56"
                >
                    <title>lavisco logo</title>
                    <g id="Layer_2" data-name="Layer 2">
                        <g id="Layer_1-2" data-name="Layer 1">
                            <path
                                fill="#dc1e3d"
                                d="M290.5,148.5c-4.5-0.7-5.1-7.9-5.1-7.9v-66c0.3-5.5-6.8-28.2-37.3-29.1c-30.5-0.9-32.7,26.1-32.7,28.4
                                                    c0.1,4.9,3.3,5.5,6,5.5c3.2-0.1,6-2.1,7.2-5.1c1-2.3,3.7-14.9,18.7-14.9c15,0,15.8,15,15.8,15v22.9c0,0-2.3-7.9-18.1-7.9
                                                    c-15.8,0-34.8,11.2-34.8,32.4s17.4,34.2,33.9,34.2s20.2-7.2,20.2-7.2s3.8,6.6,15.7,7.2C288.4,156.7,295,149.2,290.5,148.5z
                                                    M263.3,132.1c0,0-4.4,10.2-15.3,10.2s-19.1-7.9-19.1-17.7s9.6-18.1,17.2-18.1c7.6,0,14.2,3.1,17.2,8.8V132.1z"
                            />
                            <path
                                fill="#dc1e3d"
                                d="M293.29,62.66l32.5,89.18s1,4.14,11.77,4.39c0,0,5.17.5,5.17-2.78,0-1.24-2.11-3.32,10.39-27s22.75-44.37,22.75-44.37,4.14-8,.64-20.41C374,54.5,370.33,46.23,354,45.59c-6.32-.25-.76,6.35.53,7.6.2.2.35.42.54.63,2.11,2.38,8.71,15.46.28,36.83-13.08,28.47-16,35.82-16,35.82L312.81,54.14s-4.08-11.3-15-7.89C288.6,49.14,293.29,62.66,293.29,62.66Z"
                            />
                            <path
                                fill="#dc1e3d"
                                d="M384.73,54.18v90.21s1.08,11.45,10.92,11.45,10.92-8,10.92-12V54.18a11.14,11.14,0,0,0-21.84,0Z"
                            />
                            <path
                                fill="#dc1e3d"
                                d="M395.66,15.71s-12.33-.08-12.33,12.08,12.33,12.33,12.33,12.33S407.8,39.83,407.8,28C407.8,28,407.91,15.71,395.66,15.71Z"
                            />
                            <path
                                fill="#dc1e3d"
                                d="M418.25,72S418.06,46.38,451,45.78c25.94,1.2,27.87,24.37,27.87,24.37s.7,13.77-6,13.84c-4.16.05-3.8-6.44-3.8-6.44s1.6-16.15-14.29-16.77c-9.33.25-11.82,4.92-12.35,8.48A8.26,8.26,0,0,0,444,75.39c2.56,3.42,9.69,10.46,17.18,15.8,13.08,9.85,20.9,21.09,20.88,31.93-.08,5.77,1.26,23.37-25.35,31.79-30.46,6.64-41.62-15.56-44-21.75a12.17,12.17,0,0,1-.79-3.37c-.33-3.78-.42-11.75,7.83-13.54,5.07-1.1,7.6,2.23,7.55,6.8,0,1.45,0,.62,0,4.14a12.12,12.12,0,0,0,.29,3c1,4.26,4.12,10.65,13.53,10.89,14.15.37,18.12-6.08,18.5-13.16s-5-14.77-12.69-20.36S418,88.46,418.25,72Z"
                            />
                            <path
                                fill="#dc1e3d"
                                d="M541,154.37a40.16,40.16,0,0,1-25-1.53c-11.55-4.6-27-16.11-27.23-42.66-.38-45.81,24.14-58.76,24.14-58.76s17-11.85,33.34-.09C558.86,60.42,560,71.44,560,71.44s2.36,10.92-5.34,12.29c-6.49,1.15-7.77-6.8-8-9.31a6.81,6.81,0,0,0-.43-1.78c-.94-2.33-3.63-7.77-8.31-7.77-6,0-11.42.5-18.74,14.28s-4.91,43.57,1.57,51.45c0,0,9.43,10.34,22.15,3,3.15-1.82,6.21-8.91,7.12-12.54.87-3.46,1.39-4.34,3.55-5.35,1.94-.9,5.08-1.3,7.17.84,1.4,1.44,2,7.9,2,7.9S565.94,147.89,541,154.37Z"
                            />
                            <path
                                fill="#dc1e3d"
                                d="M615.67,46.53a30,30,0,0,0-10.55.38c-11.16,2.77-39,15.37-39,55.73,0,38.14,23.67,51.09,36.21,52.67,8.5,1.08,13.26.55,18.17-1.22,11-3.94,26.61-16.86,24.35-56.17a27.9,27.9,0,0,0-.57-4.27c-2.39-11.07-8.11-8-8.11-8s-2.05.93-2,6.52,2.9,36.68-15.72,46c-19.77,9.89-34-42.57-18.91-64.86,14.69-21.73,23.44-6.87,25.06-1.45,1.12,3.77,3,12.13,6.89,12s6-4.88,5.3-12.41C636.23,64.72,629.94,48.19,615.67,46.53Z"
                            />
                            <circle
                                fill="#dc1e3d"
                                cx="653.03"
                                cy="142.93"
                                r="12.74"
                            />
                            <path
                                fill="#dc1e3d"
                                d="M666.78,128.23V21.91a15.37,15.37,0,0,1,1.13-6,10.22,10.22,0,0,1,10.29-6.7C688.88,9.5,689,20.42,689,20.42V123a15.88,15.88,0,0,0,3.22,9.72c2.14,2.76,5.34,5.55,9.56,5.63,8.44.17,7.32-5.3,13.2-5.21s7.37,8.94,2.19,14.11-9.72,9.35-21.14,9.35c-6.08,0-13.42-2.87-19.25-7.41A26.48,26.48,0,0,1,666.78,128.23Z"
                            />
                            <path
                                fill="#dc1e3d"
                                d="M154.58,128.23V21.91a15.37,15.37,0,0,1,1.13-6A10.22,10.22,0,0,1,166,9.25c10.68.25,10.8,11.17,10.8,11.17V123a15.88,15.88,0,0,0,3.22,9.72c2.14,2.76,5.34,5.55,9.56,5.63,8.44.17,7.32-5.3,13.2-5.21s7.37,8.94,2.19,14.11-9.72,9.35-21.14,9.35c-6.08,0-13.42-2.87-19.25-7.41A26.51,26.51,0,0,1,154.58,128.23Z"
                            />
                            <path
                                fill="#dc1e3d"
                                d="M745.81,80.6V19.27s0-10-10.39-10c-11.79,0-11.71,10-11.71,10l-.08,127.9s0,8.69,11.92,8.69c10.26,0,10.18-10.18,10.18-10.18v-36.4s21.4,29.4,24.08,32.72c3,3.68,11.09,13.49,21.93,13.86,9.35,0,14.36-10.57,13.9-15.52-.41-4.47-5-5.05-5.88-4.14s-3.56,3.72-10.34.25-16.3-13.24-36.58-40l35.42-38.32S798,47.71,788,44.76c-5.48-1.62-9.77,2.81-9.77,2.81l-32.43,33"
                            />
                            <path
                                fill="#dc1e3d"
                                d="M120.82,59.53l-87.5,0H5.22A4.47,4.47,0,0,0,.65,64.25V90.19l7.94,7.94v47.42s-.37,6.22,4.23,6.22h98.94s5.46-.62,5.46-5.59V98.39l8.26-8.26V64A4.49,4.49,0,0,0,120.82,59.53Zm-72.5,84.29H16.91V94.33H48.32Zm0-57.84H7.85V67.73H48.32Zm20.61,57.85H57V67.73H68.93Zm39.41-.13H76.93V94.21h31.41Zm9.06-57.85H76.93V67.6H117.4Z"
                            />
                            <path
                                fill="#dc1e3d"
                                d="M111.21,3.35c-5.36-5.19-11.28-4-16.57,1.14S77.79,18,77.79,18,64.46-4.89,45,18.82c0,0-32.69-22-41.46-8S4.22,58,10.93,59.57H11a57,57,0,0,0,22.2,0h.12a55.85,55.85,0,0,0,21-9s1.1-.58-.41-4.63c-1.63-4.38-6.88-20.66-1.49-26.57,2.61-2.86,9-5.88,14.47-3.83,0,0,8.42,3.46,4.11,8.51S57.89,31.56,57.73,39.42s3.1,15.77,13.57,16.22c0,0,11.83.5,9.19-11.88,0,0,22.59,17.83,30.66,6.66S117.85,9.78,111.21,3.35ZM21.64,55C1.84,56.81,6.52,19,6.52,19c1-8.42,11.38-5.93,11.38-5.93,13.17,2.83,25.83,12.42,25.83,12.42l-.28,2.11c-6.52-2.36-18.34-.58-18.34-.58-4.1.63-10.14,5-6,12.75s26-1,26-1,2.19,9,2.19,9.23C35.79,54,21.64,55,21.64,55ZM40.5,33.25c-5.18,2.6-16.57,5.49-16.48,1.49S40.5,33.25,40.5,33.25ZM65.05,44.54a6.71,6.71,0,0,1-.21-4.81,10.35,10.35,0,0,1,3.21-4.54C73,31.07,73,31,73,31L74.51,48S68.16,51.84,65.05,44.54ZM79,30.8s7.17-3.18,18.66-1.9C104.18,29.62,77.87,31.56,79,30.8ZM107,45.39s-1.63,4.28-9.88,1.12c0,0-12.22-4.9-13.77-9.12,0,0-.76-1.12,13.77-1.12,0,0,8.29.23,6.34-9,0,0-1-6.5-13.1-4.84-1.24.16-10.36,2.1-10.36,2.1l21.1-17.81S105.05,3.43,108,9C108,9,115.42,27.08,107,45.39Z"
                            />
                        </g>
                    </g>
                </svg>
            </router-link>

            <!-- search bar -->
            <searchbar></searchbar>

            <!-- account, location & cart -->
            <div
                class="
                    d-flex
                    justify-content-end
                    align-items-center
                    order-1 order-lg-2
                "
            >
                <!-- desktop location -->
                <div class="dropdown show hide-content-md-flex">
                    <a
                        href="#"
                        role="button"
                        id="dropdownLocation"
                        data-toggle="dropdown"
                        aria-haspopup="true"
                        aria-expanded="false"
                        class="nav-link nav-link-account mr-2 mr-sm-3"
                        @click.prevent="loadDistricts()"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            aria-hidden="true"
                            role="img"
                            width="20"
                            height="20"
                            preserveAspectRatio="xMidYMid meet"
                            viewBox="0 0 24 24"
                            class="mr-md-1"
                        >
                            <circle cx="12" cy="9.5" r="1.5" fill="#333" />
                            <path
                                fill="#4e4e4e"
                                d="M12 2a8 8 0 0 0-8 7.92c0 5.48 7.05 11.58 7.35 11.84a1 1 0 0 0 1.3 0C13 21.5 20 15.4 20 9.92A8 8 0 0 0 12 2Zm0 11a3.5 3.5 0 1 1 3.5-3.5A3.5 3.5 0 0 1 12 13Z"
                            />
                        </svg>
                        <div
                            class="
                                nav-link-account-text
                                d-flex
                                flex-column
                                align-items-start
                                line-height-min
                            "
                        >
                            <span class="nav-tiny-text">Deliver to</span>
                            {{ locationActive }}
                        </div>
                    </a>
                    <div
                        class="dropdown-menu dropdown-menu-right"
                        style="border-radius: 8px"
                        aria-labelledby="dropdownLocation"
                        id="dropdownLocation"
                        @click.prevent="preventDropdownClose($event)"
                    >
                        <h6 class="dropdown-header">
                            Select product delivery location
                        </h6>
                        <div class="col-12 px-3 pt-2 pb-3">
                            <select
                                class="
                                    custom-select
                                    form-control form-control-alternative
                                "
                                id="filter"
                                name="filter"
                                @change.prevent="saveLocation(districtName)"
                                v-model="districtName"
                            >
                                <option value="" disabled selected hidden>
                                    Select District
                                </option>
                                <option
                                    v-for="district in districts"
                                    :key="district.id"
                                    :value="district.name"
                                >
                                    {{ district.name }}
                                </option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- login -->
                <router-link
                    class="nav-link nav-link-account mr-2 mr-sm-3"
                    to="/select_login"
                >
                    <span class="hide-content nav-tiny-text mr-1">Sign In</span>
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        aria-hidden="true"
                        role="img"
                        width="23"
                        height="23"
                        preserveAspectRatio="xMidYMid meet"
                        viewBox="0 0 24 24"
                        class="mr-md-1"
                    >
                        <path
                            fill="#4e4e4e"
                            d="M12 4a4 4 0 0 1 4 4a4 4 0 0 1-4 4a4 4 0 0 1-4-4a4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4Z"
                        />
                    </svg>
                    <div
                        class="
                            nav-link-account-text
                            d-flex
                            flex-column
                            align-items-start
                            line-height-min
                        "
                    >
                        <span class="nav-tiny-text">Sign In</span>
                        Account
                    </div>
                </router-link>

                <!-- cart -->
                <menu-cart></menu-cart>

                <!-- mobile menu -->
                <div
                    class="
                        hide-content
                        navbar-main-menu navbar-main-menu-mobile
                        ml-3
                    "
                >
                    <a
                        class="hamburger"
                        role="button"
                        id="toggle-sidenav"
                        @click.prevent="displayMenu"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            aria-hidden="true"
                            role="img"
                            width="36"
                            height="36"
                            preserveAspectRatio="xMidYMid meet"
                            viewBox="0 0 24 24"
                        >
                            <path
                                fill="#333"
                                d="M15 18H3v-2h12v2Zm6-5H3v-2h18v2Zm-6-5H3V6h12v2Z"
                            />
                        </svg>
                    </a>
                    <div class="dashboard-side-nav">
                        <div
                            class="
                                d-flex d-flex
                                flex-column
                                justify-content-center
                                align-items-center
                                w-100
                            "
                        >
                            <div
                                class="
                                    d-flex
                                    justify-content-between
                                    align-items-center
                                    w-100
                                    mb-4
                                "
                            >
                                <router-link to="/" class="navbar-brand mr-4">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        viewBox="0 0 805.67 156.56"
                                    >
                                        <title>lavisco logo</title>
                                        <g id="Layer_2" data-name="Layer 2">
                                            <g
                                                id="Layer_1-2"
                                                data-name="Layer 1"
                                            >
                                                <path
                                                    fill="#dc1e3d"
                                                    d="M290.5,148.5c-4.5-0.7-5.1-7.9-5.1-7.9v-66c0.3-5.5-6.8-28.2-37.3-29.1c-30.5-0.9-32.7,26.1-32.7,28.4
                                                    c0.1,4.9,3.3,5.5,6,5.5c3.2-0.1,6-2.1,7.2-5.1c1-2.3,3.7-14.9,18.7-14.9c15,0,15.8,15,15.8,15v22.9c0,0-2.3-7.9-18.1-7.9
                                                    c-15.8,0-34.8,11.2-34.8,32.4s17.4,34.2,33.9,34.2s20.2-7.2,20.2-7.2s3.8,6.6,15.7,7.2C288.4,156.7,295,149.2,290.5,148.5z
                                                    M263.3,132.1c0,0-4.4,10.2-15.3,10.2s-19.1-7.9-19.1-17.7s9.6-18.1,17.2-18.1c7.6,0,14.2,3.1,17.2,8.8V132.1z"
                                                />
                                                <path
                                                    fill="#dc1e3d"
                                                    d="M293.29,62.66l32.5,89.18s1,4.14,11.77,4.39c0,0,5.17.5,5.17-2.78,0-1.24-2.11-3.32,10.39-27s22.75-44.37,22.75-44.37,4.14-8,.64-20.41C374,54.5,370.33,46.23,354,45.59c-6.32-.25-.76,6.35.53,7.6.2.2.35.42.54.63,2.11,2.38,8.71,15.46.28,36.83-13.08,28.47-16,35.82-16,35.82L312.81,54.14s-4.08-11.3-15-7.89C288.6,49.14,293.29,62.66,293.29,62.66Z"
                                                />
                                                <path
                                                    fill="#dc1e3d"
                                                    d="M384.73,54.18v90.21s1.08,11.45,10.92,11.45,10.92-8,10.92-12V54.18a11.14,11.14,0,0,0-21.84,0Z"
                                                />
                                                <path
                                                    fill="#dc1e3d"
                                                    d="M395.66,15.71s-12.33-.08-12.33,12.08,12.33,12.33,12.33,12.33S407.8,39.83,407.8,28C407.8,28,407.91,15.71,395.66,15.71Z"
                                                />
                                                <path
                                                    fill="#dc1e3d"
                                                    d="M418.25,72S418.06,46.38,451,45.78c25.94,1.2,27.87,24.37,27.87,24.37s.7,13.77-6,13.84c-4.16.05-3.8-6.44-3.8-6.44s1.6-16.15-14.29-16.77c-9.33.25-11.82,4.92-12.35,8.48A8.26,8.26,0,0,0,444,75.39c2.56,3.42,9.69,10.46,17.18,15.8,13.08,9.85,20.9,21.09,20.88,31.93-.08,5.77,1.26,23.37-25.35,31.79-30.46,6.64-41.62-15.56-44-21.75a12.17,12.17,0,0,1-.79-3.37c-.33-3.78-.42-11.75,7.83-13.54,5.07-1.1,7.6,2.23,7.55,6.8,0,1.45,0,.62,0,4.14a12.12,12.12,0,0,0,.29,3c1,4.26,4.12,10.65,13.53,10.89,14.15.37,18.12-6.08,18.5-13.16s-5-14.77-12.69-20.36S418,88.46,418.25,72Z"
                                                />
                                                <path
                                                    fill="#dc1e3d"
                                                    d="M541,154.37a40.16,40.16,0,0,1-25-1.53c-11.55-4.6-27-16.11-27.23-42.66-.38-45.81,24.14-58.76,24.14-58.76s17-11.85,33.34-.09C558.86,60.42,560,71.44,560,71.44s2.36,10.92-5.34,12.29c-6.49,1.15-7.77-6.8-8-9.31a6.81,6.81,0,0,0-.43-1.78c-.94-2.33-3.63-7.77-8.31-7.77-6,0-11.42.5-18.74,14.28s-4.91,43.57,1.57,51.45c0,0,9.43,10.34,22.15,3,3.15-1.82,6.21-8.91,7.12-12.54.87-3.46,1.39-4.34,3.55-5.35,1.94-.9,5.08-1.3,7.17.84,1.4,1.44,2,7.9,2,7.9S565.94,147.89,541,154.37Z"
                                                />
                                                <path
                                                    fill="#dc1e3d"
                                                    d="M615.67,46.53a30,30,0,0,0-10.55.38c-11.16,2.77-39,15.37-39,55.73,0,38.14,23.67,51.09,36.21,52.67,8.5,1.08,13.26.55,18.17-1.22,11-3.94,26.61-16.86,24.35-56.17a27.9,27.9,0,0,0-.57-4.27c-2.39-11.07-8.11-8-8.11-8s-2.05.93-2,6.52,2.9,36.68-15.72,46c-19.77,9.89-34-42.57-18.91-64.86,14.69-21.73,23.44-6.87,25.06-1.45,1.12,3.77,3,12.13,6.89,12s6-4.88,5.3-12.41C636.23,64.72,629.94,48.19,615.67,46.53Z"
                                                />
                                                <circle
                                                    fill="#dc1e3d"
                                                    cx="653.03"
                                                    cy="142.93"
                                                    r="12.74"
                                                />
                                                <path
                                                    fill="#dc1e3d"
                                                    d="M666.78,128.23V21.91a15.37,15.37,0,0,1,1.13-6,10.22,10.22,0,0,1,10.29-6.7C688.88,9.5,689,20.42,689,20.42V123a15.88,15.88,0,0,0,3.22,9.72c2.14,2.76,5.34,5.55,9.56,5.63,8.44.17,7.32-5.3,13.2-5.21s7.37,8.94,2.19,14.11-9.72,9.35-21.14,9.35c-6.08,0-13.42-2.87-19.25-7.41A26.48,26.48,0,0,1,666.78,128.23Z"
                                                />
                                                <path
                                                    fill="#dc1e3d"
                                                    d="M154.58,128.23V21.91a15.37,15.37,0,0,1,1.13-6A10.22,10.22,0,0,1,166,9.25c10.68.25,10.8,11.17,10.8,11.17V123a15.88,15.88,0,0,0,3.22,9.72c2.14,2.76,5.34,5.55,9.56,5.63,8.44.17,7.32-5.3,13.2-5.21s7.37,8.94,2.19,14.11-9.72,9.35-21.14,9.35c-6.08,0-13.42-2.87-19.25-7.41A26.51,26.51,0,0,1,154.58,128.23Z"
                                                />
                                                <path
                                                    fill="#dc1e3d"
                                                    d="M745.81,80.6V19.27s0-10-10.39-10c-11.79,0-11.71,10-11.71,10l-.08,127.9s0,8.69,11.92,8.69c10.26,0,10.18-10.18,10.18-10.18v-36.4s21.4,29.4,24.08,32.72c3,3.68,11.09,13.49,21.93,13.86,9.35,0,14.36-10.57,13.9-15.52-.41-4.47-5-5.05-5.88-4.14s-3.56,3.72-10.34.25-16.3-13.24-36.58-40l35.42-38.32S798,47.71,788,44.76c-5.48-1.62-9.77,2.81-9.77,2.81l-32.43,33"
                                                />
                                                <path
                                                    fill="#dc1e3d"
                                                    d="M120.82,59.53l-87.5,0H5.22A4.47,4.47,0,0,0,.65,64.25V90.19l7.94,7.94v47.42s-.37,6.22,4.23,6.22h98.94s5.46-.62,5.46-5.59V98.39l8.26-8.26V64A4.49,4.49,0,0,0,120.82,59.53Zm-72.5,84.29H16.91V94.33H48.32Zm0-57.84H7.85V67.73H48.32Zm20.61,57.85H57V67.73H68.93Zm39.41-.13H76.93V94.21h31.41Zm9.06-57.85H76.93V67.6H117.4Z"
                                                />
                                                <path
                                                    fill="#dc1e3d"
                                                    d="M111.21,3.35c-5.36-5.19-11.28-4-16.57,1.14S77.79,18,77.79,18,64.46-4.89,45,18.82c0,0-32.69-22-41.46-8S4.22,58,10.93,59.57H11a57,57,0,0,0,22.2,0h.12a55.85,55.85,0,0,0,21-9s1.1-.58-.41-4.63c-1.63-4.38-6.88-20.66-1.49-26.57,2.61-2.86,9-5.88,14.47-3.83,0,0,8.42,3.46,4.11,8.51S57.89,31.56,57.73,39.42s3.1,15.77,13.57,16.22c0,0,11.83.5,9.19-11.88,0,0,22.59,17.83,30.66,6.66S117.85,9.78,111.21,3.35ZM21.64,55C1.84,56.81,6.52,19,6.52,19c1-8.42,11.38-5.93,11.38-5.93,13.17,2.83,25.83,12.42,25.83,12.42l-.28,2.11c-6.52-2.36-18.34-.58-18.34-.58-4.1.63-10.14,5-6,12.75s26-1,26-1,2.19,9,2.19,9.23C35.79,54,21.64,55,21.64,55ZM40.5,33.25c-5.18,2.6-16.57,5.49-16.48,1.49S40.5,33.25,40.5,33.25ZM65.05,44.54a6.71,6.71,0,0,1-.21-4.81,10.35,10.35,0,0,1,3.21-4.54C73,31.07,73,31,73,31L74.51,48S68.16,51.84,65.05,44.54ZM79,30.8s7.17-3.18,18.66-1.9C104.18,29.62,77.87,31.56,79,30.8ZM107,45.39s-1.63,4.28-9.88,1.12c0,0-12.22-4.9-13.77-9.12,0,0-.76-1.12,13.77-1.12,0,0,8.29.23,6.34-9,0,0-1-6.5-13.1-4.84-1.24.16-10.36,2.1-10.36,2.1l21.1-17.81S105.05,3.43,108,9C108,9,115.42,27.08,107,45.39Z"
                                                />
                                            </g>
                                        </g>
                                    </svg>
                                </router-link>
                                <button
                                    class="navbar-close"
                                    id="close-sidenav"
                                    @click.prevent="displayMenu"
                                >
                                    <svg
                                        width="24"
                                        height="24"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <path
                                            d="M10.5858 12L6.34315 7.75736L7.75736 6.34315L12 10.5858L16.2426 6.34315L17.6569 7.75736L13.4142 12L17.6569 16.2426L16.2426 17.6569L12 13.4142L7.75736 17.6569L6.34315 16.2426L10.5858 12Z"
                                            fill="#8D8788"
                                        />
                                    </svg>
                                </button>
                            </div>

                            <div class="d-flex align-items-center w-100 mb-2">
                                <router-link
                                    @click.native="displayMenu"
                                    to="/select_login"
                                >
                                    <button
                                        class="mr-3 btn-sm btn bg-red white"
                                    >
                                        Login
                                    </button>
                                </router-link>

                                <router-link
                                    @click.native="displayMenu"
                                    to="/sell_on_lavisco"
                                >
                                    <button class="btn-sm btn">
                                        Sell on Lavisco
                                    </button>
                                </router-link>
                            </div>

                            <hr class="hr-red" />

                            <h6
                                class="dropdown-header"
                                data-toggle="collapse"
                                data-target="#collapseCat"
                            >
                                Browse Categories
                            </h6>
                            <div class="collapse w-100" id="collapseCat">
                                <a
                                    @click="displayMenu"
                                    class="dropdown-item"
                                    href="/categories"
                                >
                                    All Categories
                                    <span class="dropdown-item-arrow"> > </span>
                                </a>
                                <router-link
                                    @click.native="displayMenu"
                                    class="dropdown-item"
                                    v-for="category in categories"
                                    :key="category.id"
                                    :to="{
                                        name: 'categories/category',
                                        params: {
                                            categoryId: category.id,
                                            slug: category.slug,
                                        },
                                    }"
                                >
                                    {{ category.name }}
                                    <span class="dropdown-item-arrow"> > </span>
                                </router-link>
                            </div>
                            <h6
                                class="dropdown-header mt-2"
                                data-toggle="collapse"
                                data-target="#collapseRec"
                            >
                                Browse Recipients
                            </h6>
                            <div class="collapse w-100" id="collapseRec">
                                <a
                                    @click="displayMenu"
                                    class="dropdown-item"
                                    href="/recipients"
                                >
                                    All Recipients
                                    <span class="dropdown-item-arrow"> > </span>
                                </a>
                                <div
                                    class="w-100"
                                    v-for="chunkRecipient in chunkedRecipients"
                                >
                                    <router-link
                                        @click.native="displayMenu"
                                        class="dropdown-item"
                                        v-for="recipient in chunkRecipient"
                                        :key="recipient.id"
                                        :to="{
                                            name: 'recipients/recipient',
                                            params: {
                                                recipientId: recipient.id,
                                                slug: recipient.slug,
                                            },
                                        }"
                                    >
                                        {{ recipient.name }}
                                        <span class="dropdown-item-arrow">
                                            >
                                        </span>
                                    </router-link>
                                </div>
                            </div>

                            <h6
                                class="dropdown-header mt-2"
                                data-toggle="collapse"
                                data-target="#collapseOcc"
                            >
                                Browse Occasions
                            </h6>
                            <div class="collapse w-100" id="collapseOcc">
                                <a
                                    @click="displayMenu"
                                    class="dropdown-item"
                                    href="/occasions"
                                >
                                    All Occasions
                                    <span class="dropdown-item-arrow"> > </span>
                                </a>
                                <div
                                    class="w-100"
                                    v-for="chunkOccasion in chunkedOccasions"
                                >
                                    <router-link
                                        @click.native="displayMenu"
                                        class="dropdown-item"
                                        v-for="occasion in chunkOccasion"
                                        :key="occasion.id"
                                        :to="{
                                            name: 'occasions/occasion',
                                            params: {
                                                occasionId: occasion.id,
                                                slug: occasion.slug,
                                            },
                                        }"
                                    >
                                        {{ occasion.name }}
                                        <span class="dropdown-item-arrow">
                                            >
                                        </span>
                                    </router-link>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- desktop menu -->
        <nav
            class="navbar navbar-expand-lg w-100 pt-0 hide-content-md-flex"
            style="z-index: 100 !important"
        >
            <div class="navbar-main-menu order-3" id="navbarSupportedContent">
                <ul
                    class="
                        navbar-nav
                        d-flex
                        justify-content-center
                        align-items-center
                    "
                >
                    <li
                        class="nav-item mx-2"
                        v-for="category in categories"
                        :key="category.id"
                    >
                        <router-link
                            class="nav-link"
                            :to="{
                                name: 'categories/category',
                                params: {
                                    categoryId: category.id,
                                    slug: category.slug,
                                },
                            }"
                        >
                            {{ category.name }}
                        </router-link>
                    </li>

                    <div class="vertical-divider"></div>

                    <li class="nav-item mx-2">
                        <div class="dropdown show">
                            <a
                                class="nav-link"
                                href="#"
                                role="button"
                                id="dropdownMenuLink1"
                                data-toggle="dropdown"
                                aria-haspopup="true"
                                aria-expanded="false"
                            >
                                Recipients
                            </a>

                            <div
                                style="z-index: -1"
                                class="dropdown-menu"
                                aria-labelledby="dropdownMenuLink1"
                            >
                                <h6 class="dropdown-header">
                                    <router-link to="/recipients">
                                        Browse All Recipients
                                    </router-link>
                                </h6>
                                <div class="d-flex flex-column flex-md-row">
                                    <div
                                        class="col-md-6"
                                        v-for="chunkRecipient in chunkedRecipients"
                                    >
                                        <router-link
                                            class="dropdown-item"
                                            v-for="recipient in chunkRecipient"
                                            :key="recipient.id"
                                            :to="{
                                                name: 'recipients/recipient',
                                                params: {
                                                    recipientId: recipient.id,
                                                    slug: recipient.slug,
                                                },
                                            }"
                                        >
                                            {{ recipient.name }}
                                            <span class="dropdown-item-arrow">
                                                >
                                            </span>
                                        </router-link>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>

                    <div class="vertical-divider"></div>

                    <li class="nav-item mx-2">
                        <div class="dropdown show">
                            <a
                                class="nav-link"
                                href="#"
                                role="button"
                                id="dropdownMenuLink2"
                                data-toggle="dropdown"
                                aria-haspopup="true"
                                aria-expanded="false"
                            >
                                Occasions
                            </a>

                            <div
                                style="z-index: -1"
                                class="dropdown-menu"
                                aria-labelledby="dropdownMenuLink2"
                            >
                                <h6 class="dropdown-header">
                                    <router-link to="/occasions">
                                        Browse All Occasions
                                    </router-link>
                                </h6>
                                <div class="d-flex flex-column flex-md-row">
                                    <div
                                        class="col-md-6"
                                        v-for="chunkOccasion in chunkedOccasions"
                                    >
                                        <router-link
                                            class="dropdown-item"
                                            v-for="occasion in chunkOccasion"
                                            :key="occasion.id"
                                            :to="{
                                                name: 'occasions/occasion',
                                                params: {
                                                    occasionId: occasion.id,
                                                    slug: occasion.slug,
                                                },
                                            }"
                                        >
                                            {{ occasion.name }}
                                            <span class="dropdown-item-arrow">
                                                >
                                            </span>
                                        </router-link>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>

                    <div class="vertical-divider"></div>

                    <li class="nav-item mx-2">
                        <router-link class="nav-link" to="/sell_on_lavisco">
                            Sell on Lavisco
                        </router-link>
                    </li>
                </ul>
            </div>
        </nav>

        <!-- mobile location picker -->
        <div class="hide-content">
            <div class="dropdown show mobile-location-picker">
                <a
                    href="#"
                    role="button"
                    id="dropdownLocation"
                    data-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false"
                    class=""
                    @click.prevent="loadDistricts()"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        aria-hidden="true"
                        role="img"
                        width="18px"
                        height="17px"
                        preserveAspectRatio="xMidYMid meet"
                        viewBox="0 0 24 24"
                        class="mr-1"
                    >
                        <circle cx="12" cy="9.5" r="1.5" fill="#333" />
                        <path
                            fill="#ffffff"
                            d="M12 2a8 8 0 0 0-8 7.92c0 5.48 7.05 11.58 7.35 11.84a1 1 0 0 0 1.3 0C13 21.5 20 15.4 20 9.92A8 8 0 0 0 12 2Zm0 11a3.5 3.5 0 1 1 3.5-3.5A3.5 3.5 0 0 1 12 13Z"
                        />
                    </svg>
                    Deliver to <strong>{{ locationActive }}</strong>
                </a>
                <div
                    class="dropdown-menu"
                    aria-labelledby="dropdownLocation"
                    id="dropdownLocation"
                    @click.prevent="preventDropdownClose($event)"
                >
                    <h6 class="dropdown-header">
                        Select product delivery location
                    </h6>
                    <div class="col-12 px-3 pt-2 pb-3">
                        <select
                            class="
                                custom-select
                                form-control form-control-alternative
                            "
                            id="filter"
                            name="filter"
                            @change.prevent="saveLocation(districtName)"
                            v-model="districtName"
                        >
                            <option value="" disabled selected hidden>
                                Select District
                            </option>
                            <option
                                v-for="district in districts"
                                :key="district.id"
                                :value="district.name"
                            >
                                {{ district.name }}
                            </option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
export default {
    data: () => ({
        recipients: [],
        occasions: [],
        categories: [],
        currencies: [],
        districts: [],
        user: "",
        districtName: "",
    }),

    computed: {
        chunkedRecipients() {
            return _.chunk(this.recipients, 6);
        },
        chunkedOccasions() {
            return _.chunk(this.occasions, 6);
        },
        chunkedDistricts() {
            return _.chunk(this.districts, 13);
        },
        currencyActive() {
            return this.$store.getters.selectedCurrency;
        },
        locationActive() {
            return this.$store.getters.selectedLocation;
        },
    },

    methods: {
        saveCurrency(currency) {
            this.$store.dispatch("saveCurrency", currency);
        },
        saveLocation(district) {
            this.$store.dispatch("saveLocation", district);
            $("#dropdownLocation").dropdown("hide");
        },
        displayMenu() {
            let sidenav = document.querySelector(".dashboard-side-nav");
            sidenav.classList.toggle("show-nav");
        },

        preventDropdownClose(e) {
            e.stopPropagation();
        },

        loadData() {
            axios
                .get("/api/navdata")
                .then((response) => {
                    this.recipients = response.data.recipients;
                    this.occasions = response.data.occasions;
                    this.categories = response.data.categories;
                    this.currencies = response.data.currencies;
                    this.user = response.data.user;
                })
                .catch((error) => console.log(error));
        },

        loadDistricts() {
            axios
                .get("/api/locations/districts")
                .then(({ data }) => {
                    this.districts = data;
                })
                .catch((error) => console.log(error));
        },
    },
    mounted() {
        this.loadData();
        Fire.$on("reloadRecords", () => {
            this.loadData();
        });
    },
};
</script>
